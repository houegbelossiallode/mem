{% extends 'template.html.twig' %}

{% block title %}Hello UsersController!{% endblock %}

{% block body %}


<div class="container-fluid" >
<div class="card shadow mb-4">
<div class="card-header py-3">
<div class="card-body table-responsive">
<div class="container" >

     <div class="row">
     <table class="table table-bordered table-striped table-highlight">
    <a href="{{ path('app_register') }}" class="btn btn-success mb-3">Nouvel utilisateur<i class="bi bi-plus"></i></a>
        <thead>
            <tr>
                
            <th>ID</th>
            <th>Prénom</th>
            <th>Nom</th>
            <th>Email</th>
            <th>Rôles</th>
            <th>Vérifié</th>
            <th>Affecté un rôle</th>
            </tr>
        </thead>
        <tbody>
        {% for user in users %}
            <tr>
                
            <td>{{ loop.index }}</td>
            <td>{{ user.nom }}</td>
            <td>{{ user.prenom }}</td>
            <td>{{ user.email }}</td>
            
            <td>
                {% for role in user.roles %}
                    {% if role == "ROLE_ADMIN" %}
                        {% set name = "Administrateur" %}
                        {% set color = "primary" %}
                    {% elseif role == "ROLE_PRODUCT_ADMIN" %}
                        {% set name = "Admin produits" %}
                        {% set color = "warning" %}
                    {% else %}
                        {% set name = "Membre" %}
                        {% set color = "success" %}
                    {% endif %}
                    <span class="badge bg-{{ color }}">{{ name }}</span>
                {% endfor %}
                
            </td>
            <td>
                <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" role="switch" id="switch{{ user.id }}" {{ user.isVerified ? "checked" : "" }} disabled>
                    <label class="form-check-label" for="switch{{ user.id }}"></label>
                </div>
            </td>
            <td>
                <a href="{{path('app_role',{id : user.id})}}" class="btn btn-success">Choisir le rôle</a>
            </td>

            </tr>
        {% else %}
            <tr>
                <td colspan="3">no records found</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>



{% endblock %}
